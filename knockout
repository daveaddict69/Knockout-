local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local plr = Players.LocalPlayer
local camera = workspace.CurrentCamera
local pushPower = 500
local character = plr.Character
local humanoid = character and character:FindFirstChild("Humanoid")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "DavislyHubGUI"
screenGui.Parent = plr:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 300, 0, 250)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -125)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
mainFrame.BorderSizePixel = 0
mainFrame.BackgroundTransparency = 0.05
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = mainFrame

local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(60, 80, 120)
stroke.Thickness = 2
stroke.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "DAVISLY HUB"
title.TextColor3 = Color3.fromRGB(100, 150, 255)
title.TextSize = 24
title.Font = Enum.Font.GothamBold
title.Parent = mainFrame

local pushButton = Instance.new("TextButton")
pushButton.Name = "PushButton"
pushButton.Size = UDim2.new(0.8, 0, 0, 40)
pushButton.Position = UDim2.new(0.1, 0, 0, 50)
pushButton.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
pushButton.Text = "PUSH"
pushButton.TextColor3 = Color3.fromRGB(255, 255, 255)
pushButton.TextSize = 18
pushButton.Font = Enum.Font.GothamBold
pushButton.Parent = mainFrame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = pushButton

local powerLabel = Instance.new("TextLabel")
powerLabel.Name = "PowerLabel"
powerLabel.Size = UDim2.new(0.8, 0, 0, 20)
powerLabel.Position = UDim2.new(0.1, 0, 0, 100)
powerLabel.BackgroundTransparency = 1
powerLabel.Text = "PUSH POWER: " .. pushPower
powerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
powerLabel.TextSize = 14
powerLabel.Font = Enum.Font.Gotham
powerLabel.Parent = mainFrame

local powerBox = Instance.new("TextBox")
powerBox.Name = "PowerBox"
powerBox.Size = UDim2.new(0.8, 0, 0, 30)
powerBox.Position = UDim2.new(0.1, 0, 0, 125)
powerBox.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
powerBox.Text = tostring(pushPower)
powerBox.TextColor3 = Color3.fromRGB(255, 255, 255)
powerBox.TextSize = 16
powerBox.Font = Enum.Font.Gotham
powerBox.ClearTextOnFocus = false
powerBox.Parent = mainFrame

local boxCorner = Instance.new("UICorner")
boxCorner.CornerRadius = UDim.new(0, 6)
boxCorner.Parent = powerBox

local discordButton = Instance.new("TextButton")
discordButton.Name = "DiscordButton"
discordButton.Size = UDim2.new(0.8, 0, 0, 30)
discordButton.Position = UDim2.new(0.1, 0, 0, 170)
discordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
discordButton.Text = "DISCORD"
discordButton.TextColor3 = Color3.fromRGB(255, 255, 255)
discordButton.TextSize = 14
discordButton.Font = Enum.Font.GothamBold
discordButton.Parent = mainFrame

local discordCorner = Instance.new("UICorner")
discordCorner.CornerRadius = UDim.new(0, 6)
discordCorner.Parent = discordButton

local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 25, 0, 25)
closeButton.Position = UDim2.new(1, -30, 0, 5)
closeButton.BackgroundTransparency = 1
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 100, 100)
closeButton.TextSize = 16
closeButton.Font = Enum.Font.GothamBold
closeButton.Parent = mainFrame

local function pushPlayer()
    if not character or not character.Parent then return end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local lookVector = camera.CFrame.LookVector
    local horizontalDirection = Vector3.new(lookVector.X, 0, lookVector.Z)
    if horizontalDirection.Magnitude > 0 then
        horizontalDirection = horizontalDirection.Unit
    else
        horizontalDirection = Vector3.new(0, 0, 1)
    end
    
    hrp.AssemblyLinearVelocity = Vector3.new(
        horizontalDirection.X * pushPower,
        hrp.AssemblyLinearVelocity.Y,
        horizontalDirection.Z * pushPower
    )
end

plr.CharacterAdded:Connect(function(newChar)
    character = newChar
    character:WaitForChild("HumanoidRootPart")
    humanoid = character:WaitForChild("Humanoid")
end)

pushButton.MouseButton1Click:Connect(pushPlayer)

powerBox.FocusLost:Connect(function()
    local num = tonumber(powerBox.Text)
    if num then
        pushPower = num
        powerLabel.Text = "PUSH POWER: " .. pushPower
    else
        powerBox.Text = tostring(pushPower)
    end
end)

discordButton.MouseButton1Click:Connect(function()
    setclipboard("https://discord.com/invite/QVABKmNb")
    
    local originalText = discordButton.Text
    discordButton.Text = "COPIED!"
    
    task.wait(1.5)
    discordButton.Text = originalText
end)

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

local uiVisible = true
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.T then
        pushPlayer()
    end
    
    if input.KeyCode == Enum.KeyCode.P then
        uiVisible = not uiVisible
        mainFrame.Visible = uiVisible
    end
end)

local draggingUI = false
local dragStart, frameStart

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        draggingUI = true
        dragStart = UserInputService:GetMouseLocation()
        frameStart = mainFrame.Position
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        draggingUI = false
    end
end)

RunService.Heartbeat:Connect(function()
    if draggingUI then
        local mousePos = UserInputService:GetMouseLocation()
        local delta = mousePos - dragStart
        mainFrame.Position = UDim2.new(
            frameStart.X.Scale, 
            frameStart.X.Offset + delta.X,
            frameStart.Y.Scale,
            frameStart.Y.Offset + delta.Y
        )
    end
end)
